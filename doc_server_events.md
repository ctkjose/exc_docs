**EXC** | DEV | [Documentation](./doc_index.md) | Version 1.0<BR>

# Messages #
*This topic applies to the BackEnd framework.*

EXC uses messages to decouple the logic of an application. The execution of your application is in essence your code responding to messages.

A message is send to indicate an **event** or to require an **action**. Messages are broadcasted by **event emitters** like the [appController](./doc_server_controllers.md). The `appController` is the main controller responsible for the life-cycle of your application and in EXC most messages are generated by the `appController`.

Handling messages is done mainly by [controllers](./doc_server_controllers.md). The main job of a controller is to responde to **messages**. A message may be an **action** from your front-end or you may get an **event** from the framework itself. See "[Adding your own controllers](./doc_server_controllers.md)" to learn more about creating your own controllers.


# Registering a handler for an event or action #

In a controller a message handler is a function, who's name follows a simple naming convention (a message handler signature). A function name that starts with "on" , for example `onAppStart` is considered a handler for the message `"AppStart"`.

```php
<?php
class recordController extends \exc\controller\viewController {
	public function onAppStart(){
		//my code here...
	}
}
```

Message handlers in your controller class are used when your controller class is loaded on request by EXC or explicitly by the user when calling `\exc\app::registerController($className, $classInstance)`.

We can also implement message handlers by registering a callback manually.
```php
<?php
$app = \exc\controller\appController::instance(); //get an instance of the app controller

$app->on( 'appStart', $callback ); //register for the event appStart
```

# Backend Messages #

The following is a list of events broadcasted by the `appController`.

| Name | Type | Description |
| -- | -- | -- |
| willDispatchAction | message | EXC will dispatch a controller action. You may change the action to execute by returning a string with a different action name.<BR><BR>This message is send only to your `appController`.<BR><BR>Signature: `function($action)` <BR><BR>Arguments: `$action` string with name of action. |
| canBecomeFirstResponder | message | EXC will delegate the role of first responder to a given controller.<BR><BR>This message is send only to your `appController`. Return false to deny the switch.<BR><BR>Signature: `function($controllerClassName, $controllerInstance)` |
| appInit | event | Your application is about to run. Initialize things required for your app to run. <BR><BR>Arguments: None. |
| appEnd | event | The backend finished a request and the app instance will be terminated. Arguments: None. |
| appAbort | event | The backend is aborting a request and the app instance will be terminated. Arguments: None. |
| appClientReady | event | The `$client` was initialized and is ready for interactions. Arguments: `$client`. |
| appClientCommit | event | The backend is about to send any `$client` interactions and the app's state to the front-end. Arguments: None. |
| appSendHeaders | event | The backend is sending the HTTP headers. Arguments: None. |
| appSendOutput | event | The backend is about to send output to the front-end. Usually HTML. Arguments: None. |
| appSendJSON | event | The backend is sending a JSON payload. Arguments: None. |
| appSendJS | event | The backend is sending a JS payload. Arguments: None. |
| viewCommit | event | About to send the default view to the output buffer. Arguments: `$view`. |
| sessionInit | event | A new session store was created. Arguments: None. |
